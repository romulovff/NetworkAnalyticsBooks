
---
title: "Group Project Notebook"
output: html_notebook
---

1. Libraries & Data Access

```{r   }
library(data.table)   
library(ggplot2)
library(igraph)

dt.books <- fread("books.csv") 
dt.books <- dt.books[,c("title", "authors", "categories", "published_year", "average_rating")]
save(dt.books, file="books.RData") 
```

2. Loading the dataset

```{r   }
load("books.RData") 

dt.books$avg_rating_class <- with(dt.books, ifelse(average_rating >= 0 & average_rating < 0.5, "[0-0.5[", ifelse(average_rating >= 0.5 & average_rating < 1, "[0.5 -1[", ifelse(average_rating >= 1 & average_rating < 1.5, "[1-1.5[", ifelse(average_rating >= 1.5 & average_rating < 2, "[1.5-2[", ifelse(average_rating >= 2 & average_rating <= 2.5, "[2-2.5]", ifelse(average_rating >= 2.5 & average_rating <= 3, "[2.5-3[", ifelse(average_rating >= 3 & average_rating <= 3.5, "[3-3.5[", ifelse(average_rating >= 3.5 & average_rating <= 4,  "[3.5-4[", ifelse(average_rating >= 4 & average_rating <= 4.5,  "[4-4.5[", ifelse(average_rating >= 4.5 & average_rating <= 5,  "[4.5-5]", "NA")))))))))))
```

3. Choosing the author

```{r   }
author = "Alan Dean Foster"
```

4. Average ranking of the author

```{r   }
dt.author <- dt.books[authors == author]

average_rating_author <- mean(dt.author$average_rating)
average_rating_author
```

5. Number of books published

```{r   }
nrow(dt.author)
```

6. Most common category of the author

```{r   }
categories.count <- as.data.frame(table(dt.author$categories)) 
categories.count <- categories.count[order(-categories.count$Freq),]
categories.count$Var1[[1]]
```

7. With how many co-authors has the author colaborated with?

```{r   }

```

8. Graph that connects author with the book

```{r   }
dt.author.unique <- dt.author[!duplicated(dt.author[,title])]
g.author.books <- graph.data.frame(dt.author.unique, directed=TRUE)
plot(g.author.books)
```

9. Graph that connects books to the category/categories

```{r   }
dt.author.category <- dt.author.unique[,c("title", "categories")]
g.books.category <- graph.data.frame(dt.author.category, directed=TRUE, vertices = NULL)
plot(g.books.category)
```

10. Graph that links to other authors that have a similar ranking

```{r   }
if (average_rating_author >= 0 & average_rating_author <= 0.5) {
  avg_rating_class_author = "[0-0.5["
} else if (average_rating_author >= 0.5 & average_rating_author <= 1) {
  avg_rating_class_author = "[0.5-1["
} else if (average_rating_author >= 1 & average_rating_author <= 1.5) {
  avg_rating_class_author = "[1-1.5["
} else if (average_rating_author >= 1.5 & average_rating_author <= 2) {
  avg_rating_class_author = "[1.5-2["
} else if (average_rating_author >= 2 & average_rating_author <= 2.5) {
  avg_rating_class_author = "[2-2.5["
} else if (average_rating_author >= 2.5 & average_rating_author <= 3) {
  avg_rating_class_author = "[2.5-3["
} else if (average_rating_author >= 3 & average_rating_author <= 3.5) {
  avg_rating_class_author = "[3-3.5["
} else if (average_rating_author >= 3.5 & average_rating_author <= 4) {
  avg_rating_class_author = "[3.5-4["
} else if (average_rating_author >= 4 & average_rating_author <= 4.5) {
  avg_rating_class_author = "[4-4.5["
} else if (average_rating_author >= 4.5 & average_rating_author <= 5) {
  avg_rating_class_author = "[4.5-5["
}

dt.similar.ranking <- dt.books[avg_rating_class == avg_rating_class_author]
dt.similar.ranking <- dt.similar.ranking[,c("authors", "avg_rating_class")]
g.similar.ranking <- graph.data.frame(dt.similar.ranking[1:30], directed=FALSE, vertices = NULL)
plot(g.similar.ranking)

```

11. Graph that links authors with the same category

```{r   }
```

12. Graph that links with the same author and category

```{r   }
```

13. Graph that links with authors that published on the same year

```{r   }
```